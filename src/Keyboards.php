<?php

namespace App;

use App\Kernel\Config\ConfigInterface;
use App\Kernel\HTTP\BotApi;

class Keyboards
{
    private BotApi $bot;

    public function __construct(
        public ConfigInterface $config,
        public string $token)
    {
        $this->bot = new BotApi($token);
    }

    public function start(): void
    {
        $startKeyboard = $this->config->get('keyboard.start');

        $this->bot->sendMessageWithBaseKeyboard('Whats up Nigga', $startKeyboard);
    }

    public function cancelAndStartHome(): void
    {
        $startKeyboard = array(
            array(
                array('text' => '๐ ะะพะน ะัะพัะธะปั'),
                array('text' => '๐ ะะพะธัะบ ะะพะปัะทะพะฒะฐัะตะปั')
            ),
            array(
                array('text' => '๐ฅ ะะบัะธะฒะฝัะต ะกะดะตะปะบะธ'),
                array('text' => '๐ช ะกะปัะถะฑะฐ ะะพะดะดะตัะถะบะธ')
            )
        );

        $this->bot->sendMessageWithBaseKeyboardCallBack('Whats up Nigga', $startKeyboard);
    }

    public function notExistSellerKeyboard(): void
    {
        $notExistKeyboard = array(
            array(
                array('text' => 'ะะปะฐะฒะฝะพะต ะะตะฝั', 'callback_data' => 'cancel')
            )
        );

        $this->bot->sendMessageWithInlineKeyboard('๐ฅ ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฝะฐะนะดะตะฝ ๐ฅ', $notExistKeyboard);
    }

    public function existSellerKeyboard(): void
    {
        $existUserKeyboard = [
            [
                ['text' => 'ะกะพะทะดะฐัั ะกะดะตะปะบั', 'callback_data' => 'startDeal'],
                ['text' => 'ะัะผะตะฝะฐ', 'callback_data' => 'cancel']
            ]
        ];

        $this->bot->sendMessageWithInlineKeyboard(
            " ๐ฅะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะนะดะตะฝ๐ฅ\n\n๐ฐ ะัะฑะธัะธัะต ะดะตะนััะฒะธะต: \n
        - ะกะพะทะดะฐัั ัะดะตะปะบั\n        - ะะตัะฝััั ะฒ ะณะปะฐะฒะฝะพะต ะผะตะฝั\n
    โ๏ธ ะะฐะถะธะผะฐั \"ะกะพะทะดะฐัั ัะดะตะปะบั\" ั ะะฐั ะตััั 5 ะผะธะฝัั, ััะพะฑั ะพะฟะธัะฐัั ััะปะพะฒะธั
    โ๏ธ ะ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต ะฟัะธะดะตััั ะฝะฐัะฐัั ะทะฐะฝะพะฒะพ",
            $existUserKeyboard
        );
    }

    public function sendConfirmationKeyboard(
        string $idSearchTable,
        string $id_telegram,
        string $lastSearchedUser,
        string $amount,
        string $terms): void
    {
        $keyboardConfirmAndSendDeal = array(
            array(
                array('text' => 'ะะพะดัะฒะตัะดะธัั ัะดะตะปะบั', 'callback_data' => 'confirmAndSendDeal'),
                array('text' => 'ะัะผะตะฝะฐ', 'callback_data' => 'cancel')
            )
        );

        $this->bot->sendMessageWithInlineKeyboard(
            sprintf(
                "๐งจ ะะพะดัะฒะตัะถะดะตะฝะธะต ัะดะตะปะบะธ โ %s\n\n๐ ะกะพะทะดะฐะป (user id): %s
๐ ะะฐะฟัะฐะฒะปัะตั ะบ (user id): %s\n ๐ฏ ะกัะผะผะฐ ัะดะตะปะบะธ: %s\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s",
                $idSearchTable,
                $id_telegram,
                $lastSearchedUser,
                $amount,
                $terms
            ),
            $keyboardConfirmAndSendDeal
        );
    }

    public function acceptInvitationKeyboard(
        string $idSeller,
        string $idSearchTable,
        string $idBuyer,
        string $usernameBuyer,
        string $amount,
        string $terms): void
    {
        $acceptDealKeyboard = array(
            array(
                array('text' => 'ะัะธะฝััั ะกะดะตะปะบั', 'callback_data' => 'acceptDeal'),
                array('text' => 'ะัะผะตะฝะฐ', 'callback_data' => 'cancelInvitationBySeller')
            )
        );

        $this->bot->sendMessageWithInlineKeyboardToUser(
            $idSeller,
            sprintf(
                "๐ฅ ะะฐะผ ะฝะฐะฟัะฐะฒะธะปะธ ะทะฐะฟัะพั ะฝะฐ ัะดะตะปะบั โ %s\n\n ๐ ะะพะบัะฟะฐัะตะปั:\n       User ID - %s
       Username - %s\n\n ๐ฅ Cัะผะผะฐ ัะดะตะปะบะธ: %s\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s ",
                $idSearchTable,
                $idBuyer,
                $usernameBuyer,
                $amount,
                $terms
            ),
            $acceptDealKeyboard
        );
    }

    public function notifyAboutAcceptionKeyboard(
        string $userWhichSendMeDeal,
        string $idOfDeal,
        string $amountofDeal,
        string $resultAmount,
        string $senderId,
        string $senderUsername,
        string $acceptortId,
        string $acceptorUsername,
        string $termsOfDeal,
        string $wallet,
    ): void
    {
        $acceptionKeyboard = array(
            array(
                array('text' => 'ะะฟะปะฐัะตะฝะพ', 'callback_data' => 'paid'),
                array('text' => 'ะัะผะตะฝะฐ', 'callback_data' => 'cancelDealByBuyer')
            )
        );

        $this->bot->sendMessageWithInlineKeyboardToUser(
            $userWhichSendMeDeal,
            sprintf(
                "๐ ะะพะปัะทะพะฒะฐัะตะปั ะฟัะธะฝัะป ัะดะตะปะบั โ %s\n
 ๐ ะกัะผะผะฐ ัะดะตะปะบะธ: %s \n ๐ ะกัะผะผะฐ ัะดะตะปะบะธ c 8 ะฟัะพั: %s \n       (ะฃัะปัะณะธ ะะฐัะฐะฝัะฐ)\n______________________________\n ๐ฅ ะะพะบัะฟะฐัะตะปั:\n      - ID: %s\n      - Username: %s\n______________________________\n ๐ฅ ะัะพะดะฐะฒะตั:\n      - ID: %s\n      - Username: %s\n ______________________________\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s\n ______________________________\n๐ฆ  ะะพัะตะปะตะบ ะดะปั ะพะฟะปะฐัั:\n\n %s\n\n๐ฝ ะะพัะปะต ะพะฟะปะฐัั ะฝะฐะถะผะธัะต \"ะะฟะปะฐัะตะฝะพ\"",
                $idOfDeal,
                $amountofDeal,
                $resultAmount,
                $senderId,
                $senderUsername,
                $acceptortId,
                $acceptorUsername,
                $termsOfDeal,
                $wallet
            ),
            $acceptionKeyboard
        );
    }


    public function sendToAdminChannelDataOfDeal(
        string $admin_chat_id,
        string $idOfDeal,
        string $amountofDeal,
        string $resultAmount,
        string $idBuyer,
        string $buyerUsername,
        string $idSeller,
        string $sellerUsername,
        string $termsOfDeal,
        string $wallet,
    ): void
    {
        $adminKeyboard = array(
            array(
                array('text' => 'ะะทะฝะพั ะฟะพะปััะตะฝ', 'callback_data' => $idOfDeal . 'adminAcceptMoney'),
                array('text' => 'ะะฐะฟะธัะฐัั ะฒ ัะดะตะปะบั', 'callback_data' => $idOfDeal . 'sendMessageToDeal')
            ),
            array(
                array('text' => 'ะะฐะฟะธัะฐัั ะฒ ะฑะพั ', 'callback_data' => 'sendMessageToBot'),
                array('text' => 'ะะฐะบัััั ัะดะตะปะบั', 'callback_data' => $idOfDeal . 'dealIsResolved')
            )
        );

        $this->bot->sendMessageWithInlineKeyboardToUser(
            $admin_chat_id,
            sprintf(
                "๐ ะกะพะทะดะฐะฝะฐ ะกะดะตะปะบะฐ โ %s\n\n
 ๐ ะกัะผะผะฐ ัะดะตะปะบะธ: %s \n ๐ ะกัะผะผะฐ ัะดะตะปะบะธ c ะฟัะพั: %s\n______________________________\n ๐ฅ ะะพะบัะฟะฐัะตะปั:\n - ID: %s\n - Username: %s\n______________________________\n ๐ฅ ะัะพะดะฐะฒะตั:\n - ID: %s\n - Username: %s\n ______________________________\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s\n ______________________________\n๐ฆ ะะพัะตะปะตะบ ะฟะพะฟะพะปะฝะตะฝะธั:\n\n %s\n",
                $idOfDeal,
                $amountofDeal,
                $resultAmount,
                $idBuyer,
                $buyerUsername,
                $idSeller,
                $sellerUsername,
                $termsOfDeal,
                $wallet
            ),
            $adminKeyboard
        );
    }

    public function notifyBuyerAdminRecievedMoney(
        string $idBuyer,
        string $idOfDeal,
        string $amountofDeal,
        string $buyerUsername,
        string $idSeller,
        string $sellerUsername,
        string $termsOfDeal,
        ): void
    {
        $buyersDealkeyboard = array(
            array(
                array('text' => 'ะะพะดัะฒะตัะดะธัั', 'callback_data' => 'paid'),
                array('text' => 'ะัะบัััั ัะฟะพั', 'callback_data' => 'cancelDealByBuyer')
            )
        );

        $this->bot->sendMessageWithInlineKeyboardToUser(
            $idBuyer,
            sprintf(
                "๐ ะะฐะฟััะตะฝะฐ ะกะดะตะปะบะฐ โ %s\n
 ๐ ะกัะผะผะฐ ัะดะตะปะบะธ: %s \n______________________________\n ๐ฅ ะะพะบัะฟะฐัะตะปั:\n - ID: %s\n - Username: %s\n______________________________\n ๐ฅ ะัะพะดะฐะฒะตั:\n - ID: %s\n - Username: %s\n ______________________________\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s",
                $idOfDeal,
                $amountofDeal,
                $idBuyer,
                $buyerUsername,
                $idSeller,
                $sellerUsername,
                $termsOfDeal,
            ),
            $buyersDealkeyboard
        );
    }

    public function notifySellerAdminRecievedMoney(
        string $idSeller,
        string $idOfDeal,
        string $amountofDeal,
        string $idBuyer,
        string $buyerUsername,
        string $sellerUsername,
        string $termsOfDeal): void
    {
        $sellersDealkeyboard = array(
            array(
                array('text' => 'ะัะฟะพะปะฝะตะฝะพ', 'callback_data' => 'paid'),
                array('text' => 'ะัะบัััั ัะฟะพั', 'callback_data' => 'cancelDealByBuyer')
            )
        );

        $this->bot->sendMessageWithInlineKeyboardToUser(
            $idSeller,
            sprintf(
                "๐ ะะฐะฟััะตะฝะฐ ะกะดะตะปะบะฐ โ %s\n
 ๐ ะกัะผะผะฐ ัะดะตะปะบะธ: %s \n______________________________\n ๐ฅ ะะพะบัะฟะฐัะตะปั:\n - ID: %s\n - Username: %s\n______________________________\n ๐ฅ ะัะพะดะฐะฒะตั:\n - ID: %s\n - Username: %s\n ______________________________\n ๐ ะัะตะดะผะตั ะกะดะตะปะบะธ: %s",
                $idOfDeal,
                $amountofDeal,
                $idBuyer,
                $buyerUsername,
                $idSeller,
                $sellerUsername,
                $termsOfDeal,
            ),
            $sellersDealkeyboard
        );
    }
}










